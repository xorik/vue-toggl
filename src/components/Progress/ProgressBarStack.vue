<template>
  <div :class="computedClass"
       role="progressbar"
       :aria-valuemin="min"
       :aria-valuenow="value"
       :aria-valuemax="max"
       :style="computedStyle">
    <template v-if="label">
      <span v-if="labelText">{{labelText}}</span>
      <span v-else>{{finished}}%</span>
    </template>
  </div>
</template>

<script>
  export default {
    props: {
      min: {
        type: Number,
        'default': 0
      },
      max: {
        type: Number,
        'default': 100
      },
      value: {
        type: Number,
        'default': 0
      },
      label: {
        type: Boolean,
        'default': false
      },
      labelText: {
        type: String
      },
      minWidth: {
        type: Boolean,
        'default': false
      },
      type: {
        type: String
      },
      striped: {
        type: Boolean,
        'default': false
      },
      active: {
        type: Boolean,
        'default': false
      }
    },
    computed: {
      finished () {
        return (this.value - this.min) / (this.max - this.min) * 100
      },
      computedClass () {
        return {
          'progress-bar': true,
          'progress-bar-striped': this.striped,
          'active': this.striped && this.active,
          [`progress-bar-${this.type}`]: !!this.type
        }
      },
      computedStyle () {
        return {
          minWidth: this.minWidth ? '2em' : null,
          width: `${this.finished}%`
        }
      }
    }
  }
</script>

<style lang="less" scoped>
  span {
    position:absolute;
    right:0;
    left:0;
  }

  .progress-bar {
    background-color: inherit;
    transition: all 0.5s;
  }
</style>
